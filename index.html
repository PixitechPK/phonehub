<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Include SEO component -->
  <div include-html="components/seo.html"></div>

  <!-- Include Analytics / Google Tag component -->
  <div include-html="components/analytics.html"></div>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Home Page</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ff0000', /* Global red color */
          },
          backgroundColor: {
            dark: '#000000'
          },
          textColor: {
            light: '#ffffff'
          }
        }
      }
    }
  </script>

  <!-- Optional global styles -->
  <link rel="stylesheet" href="assets/css/global.css">
</head>
<body class="bg-dark text-light">

  <!-- Header component -->
  <div include-html="components/header.html"></div>

  <!-- Hero component -->
  <div include-html="components/hero.html"></div>

  <!-- Brands component -->
  <div include-html="components/brands.html"></div>

  <!-- Products component -->
  <div include-html="components/products.html"></div>

  <!-- Contact component -->
  <div include-html="components/contact.html"></div>

  <!-- Footer component -->
  <div include-html="components/footer.html"></div>

  <!-- Script to include HTML components -->
  <script>
    async function includeHTML() {
      const elements = document.querySelectorAll('[include-html]');
      for (let el of elements) {
        const file = el.getAttribute('include-html');
        if (file) {
          try {
            const response = await fetch(file);
            if (response.ok) {
              el.innerHTML = await response.text();
              el.removeAttribute('include-html');

              // Initialize Load More only after products.html is loaded
              if (file === "components/products.html") {
                initLoadMore();
              }

            } else {
              el.innerHTML = "Page not found.";
            }
          } catch (err) {
            el.innerHTML = "Error loading page.";
          }
        }
      }
    }

    // Enhanced Load More function: show 3 at a time with fade-in animation
    function initLoadMore() {
      const loadMoreBtn = document.getElementById("loadMore");
      if (!loadMoreBtn) return;

      const hiddenItems = Array.from(document.querySelectorAll(".hidden-product"));
      let itemsToShow = 3;
      let currentIndex = 0;

      // Initially hide all hidden products
      hiddenItems.forEach(item => {
        item.style.display = "none";
        item.classList.add("opacity-0", "transition-opacity", "duration-700");
      });

      loadMoreBtn.addEventListener("click", () => {
        const nextItems = hiddenItems.slice(currentIndex, currentIndex + itemsToShow);
        nextItems.forEach(item => {
          item.style.display = "block";
          // Trigger fade-in
          setTimeout(() => item.classList.remove("opacity-0"), 50);
        });
        currentIndex += itemsToShow;

        // Hide button if no more hidden items
        if (currentIndex >= hiddenItems.length) {
          loadMoreBtn.style.display = "none";
        }
      });
    }

    includeHTML();
  </script>

  <!-- Global JS file (optional for other scripts) -->
  <script src="/assets/js/global.js"></script>

</body>
</html>
