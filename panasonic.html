<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Include SEO -->
  <div include-html="components/seo.html"></div>

  <!-- Include Analytics -->
  <div include-html="components/analytics.html"></div>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Home Page</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ff0000',
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="assets/css/global.css">
</head>

<body class="bg-black text-white">

  <!-- Components -->
  <div include-html="components/header.html"></div>
  <div include-html="components/hero.html"></div>
  <div include-html="components/brands.html"></div>
  <div include-html="components/pages/panasonic/products.html" id="productsComponent"></div>
  <div include-html="components/contact.html"></div>
  <div include-html="components/footer.html"></div>


  <!-- Component Loader + Load More Logic -->
  <script>
    async function includeHTML() {
      const elements = document.querySelectorAll("[include-html]");
      for (let el of elements) {
        const file = el.getAttribute("include-html");
        if (!file) continue;

        const response = await fetch(file);
        const text = await response.text();
        el.innerHTML = text;
        el.removeAttribute("include-html");

        // ðŸ‘‡ When products.html is loaded, initialize Load More
        if (file.includes("products.html")) {
          requestAnimationFrame(() => {
            initLoadMore();   // WAIT until DOM updates
          });
        }
      }
    }

    function initLoadMore() {
      const items = document.querySelectorAll(".hidden-product");
      const btn = document.getElementById("loadMore");

      if (!btn || !items.length) return;

      let current = 0;
      const step = 3;

      // Hide initially
      items.forEach(i => (i.style.display = "none"));

      btn.addEventListener("click", () => {
        const slice = Array.from(items).slice(current, current + step);
        slice.forEach(i => {
          i.style.display = "block";
          i.classList.add("opacity-0", "transition", "duration-500");
          setTimeout(() => i.classList.remove("opacity-0"), 50);
        });
        current += step;

        if (current >= items.length) {
          btn.style.display = "none";
        }
      });
    }

    includeHTML();
  </script>

</body>
</html>
